[workspace]
name = "eumdac-fetch"
channels = ["conda-forge"]
platforms = ["linux-64", "osx-64", "osx-arm64", "win-64"]

[dependencies]
python = ">=3.14"
eumdac = "*"
rich = ">=13.0.0"
fsspec = ">=2023.0.0"
aiohttp = ">=3.8.0"
pixi-pycharm = ">=0.0.10"

[pypi-dependencies]
eumdac-fetch = { path = ".", editable = true }
click = ">=8.0.0"
pyyaml = ">=6.0"

[tasks]
start = "eumdac-fetch --help"
test = "pytest tests/ -v"
lint = "ruff check src/ tests/"
format = "ruff format src/ tests/"
format-check = "ruff format --check src/ tests/"
docs = "sphinx-build -b html docs/ docs/_build/html"
docs-serve = "python -m http.server -d docs/_build/html 8000"
pycharm-conda-shim = "echo $CONDA_PREFIX/libexec/conda"

[feature.dev.dependencies]
pytest = ">=8.0.0"
pytest-asyncio = ">=0.23.0"
pytest-cov = ">=4.0.0"
ruff = ">=0.3.0"
xarray = ">=2024.0.0"
h5netcdf = ">=1.0.0"

[feature.dev.pypi-dependencies]
eumdac-fetch = { path = ".", editable = true, extras = ["dev"] }

[feature.docs.pypi-dependencies]
eumdac-fetch = { path = ".", editable = true, extras = ["docs"] }

# rtd: simulates the Read the Docs build environment.
# Python 3.12 only, no package install â€” mirrors what RTD does with docs/requirements.txt.
# The src/ path is injected by docs/conf.py so autodoc can find the package.
[feature.rtd.dependencies]
python = "3.12.*"

[feature.rtd.pypi-dependencies]
sphinx = ">=7.0"
furo = "*"
myst-parser = "*"
sphinx-copybutton = "*"
sphinxcontrib-mermaid = "*"
sphinx-click = "*"

[feature.rtd.tasks]
rtd-build = "sphinx-build -b html docs/ docs/_build/html-rtd"

[environments]
default = { solve-group = "default" }
dev = { features = ["dev"], solve-group = "default" }
docs = { features = ["docs"], solve-group = "default" }
rtd = { features = ["rtd"], no-default-feature = true }
